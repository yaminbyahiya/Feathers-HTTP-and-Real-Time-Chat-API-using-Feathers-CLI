"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generate = void 0;
const pinion_1 = require("@feathershq/pinion");
const commons_1 = require("../../commons");
const importTemplate = ({ upperName, folder, fileName, camelName }) => /* ts */ `
import { ${camelName}Client } from './services/${folder.join('/')}/${fileName}.shared'
export type {
  ${upperName},
  ${upperName}Data,
  ${upperName}Query,
  ${upperName}Patch
} from './services/${folder.join('/')}/${fileName}.shared'
`;
const registrationTemplate = ({ camelName }) => `  client.configure(${camelName}Client)`;
const toClientFile = (0, pinion_1.toFile)(({ lib }) => [lib, 'client']);
const generate = async (ctx) => (0, pinion_1.generator)(ctx).then((0, pinion_1.when)(({ lib, language }) => (0, commons_1.fileExists)(lib, `client.${language}`), (0, commons_1.injectSource)(registrationTemplate, (0, pinion_1.before)('return client'), toClientFile), (0, commons_1.injectSource)(importTemplate, (0, pinion_1.after)(({ language }) => language === 'ts' ? 'import type { AuthenticationClientOptions }' : 'import authenticationClient'), toClientFile)));
exports.generate = generate;
//# sourceMappingURL=client.tpl.js.map